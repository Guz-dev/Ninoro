---
import cancion from '../assets/sound/cancion.mp3';

import Layout from '../layouts/Layout.astro';

import GoalPart1 from '../assets/imgs/1moonmochi_goal.jpg';
import GoalPart2 from '../assets/imgs/2ninoro_goal.jpg';

import Modal from '../components/Modal.astro';

import messages_data from '../assets/data/months.json'

---

<Layout title="Ninoro">
    <h1 class="mt-2 w-full text-center text-5xl text-white">★ 𝑵𝒊𝒏𝒐𝒓𝒐 ☆</h1>    
    <goal class="flex w-full md:h-2/5 justify-center items-center gap-2 md:mt-0 mt-20">

        <a class="flex w-1/3 justify-center items-center md:h-3/5 md:w-1/5">
            <img class="flex mb-5 items-center rounded-xl ninoropfp" src={ GoalPart1.src } alt="Moonmochi">        

        </a>
        <a class="flex w-1/3 justify-center items-center md:h-3/5 md:w-1/5">
            <img class="flex mb-5 items-center rounded-xl ninoropfp" src={ GoalPart2.src } alt="Ninoro">        
        </a>
        
    </goal>
    <p class="text-2xl text-white font-bold">❤️ MoonMochi y Ninoro ❤️</p>
    <months class="flex flex-col md:w-1/3 w-2/3 mt-5">
        <h1 class="text-3xl text-white text-center w-full underline">Meses</h1>
        <hearts class="mt-4">
            {messages_data.map((message, index) => (
                <button id={index.toString()} class="w-8 h-8 md:opacity-50 hover:opacity-100 transition-all duration-300 button_hearts"></button>
                <Modal mes={message.month} message={message.message} />
            ))}
        </hearts>
    </months>

    <audio loop src={cancion}></audio>
</Layout>

<script>
    const audio = document.querySelector('audio');
    document.querySelectorAll('.button_hearts').forEach((button) => {
        button.addEventListener('click', () => {
            const modal = document.getElementById("dialog");
            if(audio){
                audio.volume = 0.1;
                audio.play();
            }

            if(modal) modal.style.display = "flex";
        });
    });
</script>

<style is:global>
    body{
        background-image: url("../assets/imgs/main_bg.png");
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: center;    
    }

    h1{
        text-shadow: 0 0 10px rgb(33, 54, 172);
    }

    p{
        text-shadow: 0 0 10px rgb(35, 47, 153);
        font-family: 'Times New Roman', Times, serif;
    }

    .button_hearts{
        background-image: url("../assets/imgs/heart.gif");
        background-size: cover;
    }

    .ninoropfp{
        box-shadow: 0 0 10px rgb(255, 255, 255);
    }
    
</style>
