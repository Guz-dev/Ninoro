---
import Cancion from '../assets/sound/cancion.mp3';

import Layout from '../layouts/Layout.astro';

import Modal from '../components/Modal.astro';

import messages_data from '../assets/data/months.json'
/* 
import Moon1 from '../assets/imgs/goals/moonmochi/1.jpg';
import Moon2 from '../assets/imgs/goals/moonmochi/2.jpg';
import Moon3 from '../assets/imgs/goals/moonmochi/3.jpg';

import Ninoro1 from '../assets/imgs/goals/ninoro/1.jpg';
import Ninoro2 from '../assets/imgs/goals/ninoro/2.jpg';
import Ninoro3 from '../assets/imgs/goals/ninoro/3.jpg';
 */

import MoonGoal from '../assets/imgs/goals/moonmochi/actual_moonmochi.jpg';
import NinoroGoal from '../assets/imgs/goals/ninoro/actual_ninoro.jpg';

---

<Layout title="Ninoro">
    <h1 class="mt-16 w-full text-center text-5xl text-white">‚òÖ ùëµùíäùíèùíêùíìùíê ‚òÜ</h1>    

    <goal class="flex w-full md:h-1/5 justify-center items-center gap-2 md:mt-6 mt-10">
        <a class="flex w-1/2 justify-center items-center md:h-3/5 md:w-1/5" href="http://aminoapps.com/p/yph2w4">
            <img class="flex mb-5 items-center rounded-xl ninoropfp" src={NinoroGoal.src} alt="Ninoro">
        </a>
        <a class="flex w-1/2 justify-center items-center md:h-3/5 md:w-1/5" href="http://aminoapps.com/p/11ic1h">
            <img class="flex mb-5 items-center rounded-xl ninoropfp" src={MoonGoal.src} alt="Moonmochi">        
        </a>

<!-- 
        <button id="left_slide" class="goal bg-gray-600 bg-opacity-75 rounded-full text-center align-middle text-white text-3xl font-extrabold w-10 h-10 md:opacity-60 hover:opacity-100 -scale-100">‚û§</button>

        <slide id="0" class="hidden justify-center items-center gap-1 slide">                
            <a class="flex w-1/2 justify-center items-center md:h-3/5 md:w-1/5">
                <img class="flex mb-5 items-center rounded-xl ninoropfp" src={Moon1.src} alt="Moonmochi">        
            </a>

            <a class="flex w-1/2 justify-center items-center md:h-3/5 md:w-1/5">
                <img class="flex mb-5 items-center rounded-xl ninoropfp" src={Ninoro1.src} alt="Ninoro">
            </a>
        </slide>

        <slide id="1" class="hidden justify-center items-center gap-1 slide">                
            <a class="flex w-1/2 justify-center items-center md:h-3/5 md:w-1/5">
                <img class="flex mb-5 items-center rounded-xl ninoropfp" src={Moon2.src} alt="Moonmochi">        
            </a>

            <a class="flex w-1/2 justify-center items-center md:h-3/5 md:w-1/5">
                <img class="flex mb-5 items-center rounded-xl ninoropfp" src={Ninoro2.src} alt="Ninoro">
            </a>
        </slide>

        <slide id="2" class="hidden justify-center items-center gap-1 slide">                
            <a class="flex w-1/2 justify-center items-center md:h-3/5 md:w-1/5">
                <img class="flex mb-5 items-center rounded-xl ninoropfp" src={Moon3.src} alt="Moonmochi">        
            </a>

            <a class="flex w-1/2 justify-center items-center md:h-3/5 md:w-1/5">
                <img class="flex mb-5 items-center rounded-xl ninoropfp" src={Ninoro3.src} alt="Ninoro">
            </a>
        </slide>

        <button id="right_slide" class="goal bg-gray-600 bg-opacity-75 rounded-full text-center align-middle text-white text-3xl font-extrabold w-10 h-10 md:opacity-60 hover:opacity-100">‚û§</button>
     -->
    </goal>
    <p class="text-2xl text-white font-bold">‚ù§Ô∏è MoonMochi y Ninoro ‚ù§Ô∏è</p>
    <months class="flex flex-col md:w-1/3 w-2/3">
        <h1 class="text-3xl text-white text-center w-full underline">Meses</h1>
        <hearts class="mt-4">
            {messages_data.map((message, index) => (
                <button id={index.toString()} class="w-8 h-8 md:opacity-50 hover:opacity-100 transition-all duration-300 button_hearts"></button>
                <Modal id={index.toString()} mes={message.month} message={message.message} />
            ))}
        </hearts>
    </months>

    <audio loop src={Cancion}></audio>
</Layout>

<script>
/*
    let actual_slide = 0;
    const slides = document.querySelectorAll('slide') as NodeListOf<HTMLElement>;
    let max_slides = slides.length;
    slides[actual_slide].classList.remove('hidden');
    slides[actual_slide].classList.add('flex');

    const goals_btn = document.querySelectorAll('.goal') as NodeListOf<HTMLButtonElement>;   
    goals_btn[0].disabled = true;
    
    goals_btn.forEach((button) => {
        button.addEventListener('click', (e) => {            
            e.preventDefault();
            if((e.target as HTMLInputElement).id === 'left_slide'){
                slides[actual_slide].classList.remove('flex');
                slides[actual_slide].classList.add('hidden');
                actual_slide--;
                slides[actual_slide].classList.remove('hidden');
                slides[actual_slide].classList.add('flex');
                slides[actual_slide].style.animation = 'slidefromright 0.5s';
            }else{
                slides[actual_slide].classList.remove('flex');
                slides[actual_slide].classList.add('hidden');
                actual_slide++;
                slides[actual_slide].classList.remove('hidden');
                slides[actual_slide].classList.add('flex');
                slides[actual_slide].style.animation = 'slidetoright 0.8s';
            }

            if(actual_slide === 0){
                goals_btn[0].disabled = true;
                goals_btn[1].disabled = false;
            } else if(actual_slide === max_slides - 1){
                goals_btn[1].disabled = true;
                goals_btn[0].disabled = false;
            } else {
                goals_btn[0].disabled = false;
                goals_btn[1].disabled = false;
            }
        });
    });
*/
    const audio = document.querySelector('audio');
    const modals = document.getElementsByTagName('dialog');

    document.querySelectorAll('.button_hearts').forEach((button, index) => {

        button.addEventListener('click', () => {
            const modal = document.getElementById("dialog" + index.toString());
            if(audio){
                audio.volume = 0.1;
                audio.play();
            }

            if(modals[index]) modals[index].style.display = "flex";
        });
    });
    
</script>

<style>
    body{
        background-image: url("../assets/imgs/stars2.gif");
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
    }

    h1{
        text-shadow: 0 0 10px rgb(245, 26, 197);
    }

    p{
        text-shadow: 0 0 10px rgb(199, 199, 199);
        font-family: 'Times New Roman', Times, serif;
    }

    .button_hearts{
        background-image: url("../assets/imgs/heart.gif");
        background-size: cover;
    }

    .ninoropfp{
        box-shadow: 0 0 10px rgb(255, 255, 255);
    }

    .slide{
        transition: visibility 0s linear 0.5s, opacity 0.5s linear;
    }

    @keyframes slidetoright {
        0% {
            transform: translateX(10%);
        }
        100% {
            transform: translateX(0);
        }
    }

    @keyframes slidefromright {
        0% {
            transform: translateX(-50%);
        }
        100% {
            transform: translateX(0);
        }
    }
    
</style>
